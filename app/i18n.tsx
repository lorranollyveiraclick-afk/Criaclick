"use client";

import React, { createContext, useContext, useEffect, useMemo, useState } from "react";

type Locale = "pt" | "en" | "es";

type Dictionary = Record<string, string>;

type I18nContextType = {
  locale: Locale;
  setLocale: (l: Locale) => void;
  t: (key: string) => string;
};

const I18nContext = createContext<I18nContextType | undefined>(undefined);

const DICTS: Record<Locale, Dictionary> = {
  pt: {
    contactUs: "Entre em Contato",
    exploreNow: "Explorar",
    subscribe: "Assinar",
    currentAuction: "Em Destaque",
    iWant: "Eu Quero",
    mostPopular: "Mais Popular",
    recommended: "Recomendado",
    priceOnRequest: "Sob Consulta",
    header_home: "Home",
    header_company: "A Empresa",
    header_solutions: "Soluções",
    header_portfolio: "Portfólio",
    header_contact: "Fale Conosco",
    hero_digital: "Digital",
    hero_agencyIs: "Agência é",
    hero_theTrend: "A Tendência",
    hero_today: "Hoje",
    hero_paragraph: "Não seja amador, registre seu domínio e obtenha email profissional para construir sua presença digital.",
    hero_artworks: "Artes",
    hero_artists: "Artistas",
    hero_auctions: "Leilões",
    cta_badge: "Transforme Sua Presença Digital",
    cta_title_l1: "Estamos a um",
    cta_title_click: "click",
    cta_title_l2: "do seu",
    cta_title_success: "sucesso",
    cta_paragraph: "Nosso foco é criar sua identidade digital usando nossa experiência e criatividade para impulsionar seu crescimento.",
    // CTA feature badges
    cta_feat_support: "Suporte Técnico",
    cta_feat_ssl: "Certificado Gratuito",
    cta_feat_seo: "Otimização Inclusa",
    services_our: "Nossas",
    services_solutions: "Soluções",
    services_intro: "A Criaclick possui um time de especialistas prontos para desenvolver o que você precisa.",
    svc_sites_title: "Sites para Empresas",
    svc_sites_desc: "Websites profissionais e responsivos que convertem visitantes em clientes.",
    svc_sites_f1: "Design Responsivo",
    svc_sites_f2: "SEO Otimizado",
    svc_sites_f3: "Carregamento Rápido",
    svc_landing_title: "Landing Pages",
    svc_landing_desc: "Páginas de alta conversão focadas em capturar leads e gerar vendas.",
    svc_landing_f1: "Alta Conversão",
    svc_landing_f2: "A/B Testing",
    svc_landing_f3: "Integração CRM",
    svc_store_title: "Lojas Virtuais",
    svc_store_desc: "E-commerces completos com sistema de pagamento e gestão integrada.",
    svc_store_f1: "Pagamentos Online",
    svc_store_f2: "Gestão de Estoque",
    svc_store_f3: "Multi-plataforma",
    svc_marketing_title: "Assessoria de Marketing",
    svc_marketing_desc: "Estratégias digitais personalizadas para acelerar seu crescimento.",
    svc_marketing_f1: "Marketing Digital",
    svc_marketing_f2: "Redes Sociais",
    svc_marketing_f3: "Análise de Dados",
    pricing_sites_title: "Planos - Sites",
    pricing_sites_sub: "Escolha o plano ideal para transformar sua presença digital",
    plan_basic: "Site Básico",
    plan_prof: "Site Profissional",
    plan_premium: "Site Premium",
    plan_basic_desc: "Ideal para pequenos negócios e profissionais autônomos",
    plan_prof_desc: "Perfeito para empresas em crescimento",
    plan_premium_desc: "Solução customizada para grandes empresas",
    feat_responsive: "Design responsivo",
    feat_5pages: "Até 5 páginas",
    feat_ssl: "SSL gratuito",
    feat_social: "Integração redes sociais",
    feat_form: "Formulário de contato",
    feat_support_email: "Suporte por email",
    feat_15pages: "Até 15 páginas",
    feat_blog: "Blog integrado",
    feat_seo_adv: "SEO avançado",
    feat_ga: "Google Analytics",
    feat_chat: "Chat online",
    feat_priority_support: "Suporte prioritário",
    feat_unlimited_pages: "Páginas ilimitadas",
    feat_custom_design: "Design personalizado",
    feat_custom_features: "Funcionalidades customizadas",
    feat_integrations: "Integração sistemas",
    feat_dedicated_support: "Suporte dedicado",
    feat_strategy: "Consultoria estratégica",
    pricing_ecom_title: "Planos - Lojas Virtuais",
    pricing_ecom_sub: "E-commerce completo para impulsionar suas vendas online",
    e1_name: "Plano 1",
    e1_sub: "Starter",
    e1_desc: "Ideal para começar a vender online",
    e1_f1: "Até 100 produtos",
    e1_f2: "Carrinho abandonado",
    e1_f3: "Integração pagamentos",
    e1_f4: "Painel administrativo",
    e1_f5: "Suporte por email",
    e1_f6: "SSL incluído",
    e2_name: "Plano 2",
    e2_sub: "Growth",
    e2_desc: "Para empresas em expansão",
    e2_f1: "Até 500 produtos",
    e2_f2: "Tudo do Plano 1",
    e2_f3: "Relatórios avançados",
    e2_f4: "Integração ERP",
    e2_f5: "Multi-formas pagamento",
    e2_f6: "Suporte técnico",
    e2_f7: "Marketing por email",
    e3_name: "Plano 3",
    e3_sub: "Enterprise",
    e3_desc: "Solução completa para grandes volumes",
    e3_f1: "Produtos ilimitados",
    e3_f2: "Tudo do Plano 2",
    e3_f3: "Marketplace integrado",
    e3_f4: "API personalizada",
    e3_f5: "Suporte 24/7",
    e3_f6: "Consultoria dedicada",
    e3_f7: "Treinamento incluso",
    value_custom: "Valor personalizado para sua necessidade",
    // Included features list (section title + items)
    features_included_title: "Recursos Inclusos em Todos os Planos",
    e_included_1: "Integração Mercado Pago",
    e_included_2: "Painel Administrativo",
    e_included_3: "Carrinho Abandonado",
    e_included_4: "Relatórios de Vendas",
    e_included_5: "Gestão de Estoque",
    e_included_6: "Cupons de Desconto",
    e_included_7: "SEO Otimizado",
    e_included_8: "Suporte Técnico",
    // Sites: additional info
    plans_include_title: "Todos os planos incluem hospedagem, domínio e manutenção básica",
    no_setup_fee: "Sem taxa de setup",
    cancel_anytime: "Cancele quando quiser",
    footer_company_title: "Criaclick",
    footer_company_desc: "Somos a Criaclick, agência digital formada por profissionais com mais de 5 anos de experiência no mundo digital.",
    footer_links: "Links Institucionais",
    footer_link_company: "A Empresa",
    footer_link_contact: "Fale Conosco",
    footer_link_privacy: "Política de Privacidade",
    footer_link_terms: "Termos de Uso",
    footer_contact: "Contato",
    footer_address_line1: "R. Dep. Raimundo Andrade, 11",
    footer_address_line2: "BR, Codo-MA",
    footer_rights: "© {year} Criaclick. Todos os direitos reservados.",
    footer_built_by: "Desenvolvido com",
    footer_team: "pela equipe Criaclick",
  },
  en: {
    contactUs: "Contact Us",
    exploreNow: "Explore Now",
    subscribe: "Subscribe",
    currentAuction: "Current Auction",
    iWant: "I Want It",
    mostPopular: "Most Popular",
    recommended: "Recommended",
    priceOnRequest: "Price on Request",
    header_home: "Home",
    header_company: "Company",
    header_solutions: "Solutions",
    header_portfolio: "Portfolio",
    header_contact: "Contact",
    hero_digital: "Digital",
    hero_agencyIs: "Agency Is",
    hero_theTrend: "The Trend",
    hero_today: "Today",
    hero_paragraph: "Don't be amateur; register your domain and get a professional email to build your digital presence.",
    hero_artworks: "Artworks",
    hero_artists: "Artists",
    hero_auctions: "Auctions",
    cta_badge: "Transform Your Digital Presence",
    cta_title_l1: "We are one",
    cta_title_click: "click",
    cta_title_l2: "away from your",
    cta_title_success: "success",
    cta_paragraph: "Our focus is to craft your digital identity using our experience and creativity to boost your growth.",
    // CTA feature badges
    cta_feat_support: "Technical Support",
    cta_feat_ssl: "Free Certificate",
    cta_feat_seo: "SEO Included",
    services_our: "Our",
    services_solutions: "Solutions",
    services_intro: "A specialized team ready to build exactly what you need.",
    svc_sites_title: "Business Websites",
    svc_sites_desc: "Professional, responsive websites that convert visitors into customers.",
    svc_sites_f1: "Responsive Design",
    svc_sites_f2: "SEO Optimized",
    svc_sites_f3: "Fast Loading",
    svc_landing_title: "Landing Pages",
    svc_landing_desc: "High-converting pages focused on leads and sales.",
    svc_landing_f1: "High Conversion",
    svc_landing_f2: "A/B Testing",
    svc_landing_f3: "CRM Integration",
    svc_store_title: "Online Stores",
    svc_store_desc: "Complete ecommerce with payments and management integrated.",
    svc_store_f1: "Online Payments",
    svc_store_f2: "Inventory Management",
    svc_store_f3: "Multi-platform",
    svc_marketing_title: "Marketing Advisory",
    svc_marketing_desc: "Tailored digital strategies to accelerate growth.",
    svc_marketing_f1: "Digital Marketing",
    svc_marketing_f2: "Social Media",
    svc_marketing_f3: "Data Analysis",
    pricing_sites_title: "Plans - Websites",
    pricing_sites_sub: "Choose the ideal plan to transform your presence",
    plan_basic: "Basic Website",
    plan_prof: "Professional Website",
    plan_premium: "Premium Website",
    plan_basic_desc: "Ideal for small businesses and freelancers",
    plan_prof_desc: "Perfect for growing companies",
    plan_premium_desc: "Custom solution for enterprises",
    feat_responsive: "Responsive design",
    feat_5pages: "Up to 5 pages",
    feat_ssl: "Free SSL",
    feat_social: "Social media integration",
    feat_form: "Contact form",
    feat_support_email: "Email support",
    feat_15pages: "Up to 15 pages",
    feat_blog: "Blog included",
    feat_seo_adv: "Advanced SEO",
    feat_ga: "Google Analytics",
    feat_chat: "Online chat",
    feat_priority_support: "Priority support",
    feat_unlimited_pages: "Unlimited pages",
    feat_custom_design: "Custom design",
    feat_custom_features: "Custom features",
    feat_integrations: "Systems integration",
    feat_dedicated_support: "Dedicated support",
    feat_strategy: "Strategic consulting",
    pricing_ecom_title: "Plans - Ecommerce",
    pricing_ecom_sub: "Complete ecommerce to boost your online sales",
    e1_name: "Plan 1",
    e1_sub: "Starter",
    e1_desc: "Ideal to start selling online",
    e1_f1: "Up to 100 products",
    e1_f2: "Abandoned cart",
    e1_f3: "Payments integration",
    e1_f4: "Admin panel",
    e1_f5: "Email support",
    e1_f6: "SSL included",
    e2_name: "Plan 2",
    e2_sub: "Growth",
    e2_desc: "For expanding businesses",
    e2_f1: "Up to 500 products",
    e2_f2: "Everything from Plan 1",
    e2_f3: "Advanced reports",
    e2_f4: "ERP integration",
    e2_f5: "Multiple payment methods",
    e2_f6: "Technical support",
    e2_f7: "Email marketing",
    e3_name: "Plan 3",
    e3_sub: "Enterprise",
    e3_desc: "Complete solution for high volume",
    e3_f1: "Unlimited products",
    e3_f2: "Everything from Plan 2",
    e3_f3: "Marketplace integration",
    e3_f4: "Custom API",
    e3_f5: "24/7 support",
    e3_f6: "Dedicated consulting",
    e3_f7: "Training included",
    value_custom: "Custom pricing for your needs",
    features_included_title: "Features Included in All Plans",
    e_included_1: "Mercado Pago Integration",
    e_included_2: "Admin Panel",
    e_included_3: "Abandoned Cart",
    e_included_4: "Sales Reports",
    e_included_5: "Stock Management",
    e_included_6: "Discount Coupons",
    e_included_7: "SEO Optimized",
    e_included_8: "Technical Support",
    plans_include_title: "All plans include hosting, domain and basic maintenance",
    no_setup_fee: "No setup fee",
    cancel_anytime: "Cancel anytime",
    footer_company_title: "Criaclick",
    footer_company_desc: "We are Criaclick, a digital agency with over 5 years of experience.",
    footer_links: "Institutional Links",
    footer_link_company: "Company",
    footer_link_contact: "Contact",
    footer_link_privacy: "Privacy Policy",
    footer_link_terms: "Terms of Use",
    footer_contact: "Contact",
    footer_address_line1: "R. Dep. Raimundo Andrade, 11",
    footer_address_line2: "BR, Codo-MA",
    footer_rights: "© {year} Criaclick. All rights reserved.",
    footer_built_by: "Built with",
    footer_team: "by the Criaclick team",
  },
  es: {
    contactUs: "Contactar",
    exploreNow: "Explorar",
    subscribe: "Suscribirse",
    currentAuction: "Subasta Actual",
    iWant: "Lo Quiero",
    mostPopular: "Más Popular",
    recommended: "Recomendado",
    priceOnRequest: "A Consultar",
    header_home: "Inicio",
    header_company: "La Empresa",
    header_solutions: "Soluciones",
    header_portfolio: "Portafolio",
    header_contact: "Contáctanos",
    hero_digital: "Digital",
    hero_agencyIs: "Agencia es",
    hero_theTrend: "La Tendencia",
    hero_today: "Hoy",
    hero_paragraph: "No seas amateur; registra tu dominio y obtén email profesional para construir tu presencia digital.",
    hero_artworks: "Obras",
    hero_artists: "Artistas",
    hero_auctions: "Subastas",
    cta_badge: "Transforma tu Presencia Digital",
    cta_title_l1: "Estamos a un",
    cta_title_click: "click",
    cta_title_l2: "de tu",
    cta_title_success: "éxito",
    cta_paragraph: "Nuestro enfoque es crear tu identidad digital usando nuestra experiencia y creatividad para impulsar tu crecimiento.",
    // CTA feature badges
    cta_feat_support: "Soporte Técnico",
    cta_feat_ssl: "Certificado Gratuito",
    cta_feat_seo: "SEO Incluido",
    services_our: "Nuestras",
    services_solutions: "Soluciones",
    services_intro: "Un equipo especializado listo para construir lo que necesitas.",
    svc_sites_title: "Sitios para Empresas",
    svc_sites_desc: "Sitios profesionales y responsivos que convierten visitantes en clientes.",
    svc_sites_f1: "Diseño Responsivo",
    svc_sites_f2: "SEO Optimizado",
    svc_sites_f3: "Carga Rápida",
    svc_landing_title: "Landing Pages",
    svc_landing_desc: "Páginas de alta conversión enfocadas en leads y ventas.",
    svc_landing_f1: "Alta Conversión",
    svc_landing_f2: "A/B Testing",
    svc_landing_f3: "Integración CRM",
    svc_store_title: "Tiendas Virtuales",
    svc_store_desc: "Ecommerce completo con pagos e gestión integrada.",
    svc_store_f1: "Pagos en Línea",
    svc_store_f2: "Gestión de Inventario",
    svc_store_f3: "Multiplataforma",
    svc_marketing_title: "Asesoría de Marketing",
    svc_marketing_desc: "Estrategias digitales a medida para acelerar tu crecimiento.",
    svc_marketing_f1: "Marketing Digital",
    svc_marketing_f2: "Redes Sociales",
    svc_marketing_f3: "Análisis de Datos",
    pricing_sites_title: "Planes - Sitios",
    pricing_sites_sub: "Elige el plan ideal para transformar tu presencia",
    plan_basic: "Sitio Básico",
    plan_prof: "Sitio Profesional",
    plan_premium: "Sitio Premium",
    plan_basic_desc: "Ideal para pequeños negocios y autónomos",
    plan_prof_desc: "Perfecto para empresas en crecimiento",
    plan_premium_desc: "Solución personalizada para grandes empresas",
    feat_responsive: "Diseño responsivo",
    feat_5pages: "Hasta 5 páginas",
    feat_ssl: "SSL gratuito",
    feat_social: "Integración redes sociales",
    feat_form: "Formulario de contacto",
    feat_support_email: "Soporte por email",
    feat_15pages: "Hasta 15 páginas",
    feat_blog: "Blog integrado",
    feat_seo_adv: "SEO avanzado",
    feat_ga: "Google Analytics",
    feat_chat: "Chat en línea",
    feat_priority_support: "Soporte prioritario",
    feat_unlimited_pages: "Páginas ilimitadas",
    feat_custom_design: "Diseño personalizado",
    feat_custom_features: "Funcionalidades a medida",
    feat_integrations: "Integración de sistemas",
    feat_dedicated_support: "Soporte dedicado",
    feat_strategy: "Consultoría estratégica",
    pricing_ecom_title: "Planes - Tiendas",
    pricing_ecom_sub: "Ecommerce completo para impulsar tus ventas",
    e1_name: "Plan 1",
    e1_sub: "Starter",
    e1_desc: "Ideal para comenzar a vender online",
    e1_f1: "Hasta 100 productos",
    e1_f2: "Carrito abandonado",
    e1_f3: "Integración de pagos",
    e1_f4: "Panel administrativo",
    e1_f5: "Soporte por email",
    e1_f6: "SSL incluido",
    e2_name: "Plan 2",
    e2_sub: "Growth",
    e2_desc: "Para empresas en expansión",
    e2_f1: "Hasta 500 productos",
    e2_f2: "Todo del Plan 1",
    e2_f3: "Reportes avanzados",
    e2_f4: "Integración ERP",
    e2_f5: "Múltiples pagos",
    e2_f6: "Soporte técnico",
    e2_f7: "Email marketing",
    e3_name: "Plan 3",
    e3_sub: "Enterprise",
    e3_desc: "Solución completa para gran volumen",
    e3_f1: "Productos ilimitados",
    e3_f2: "Todo del Plan 2",
    e3_f3: "Marketplace integrado",
    e3_f4: "API personalizada",
    e3_f5: "Soporte 24/7",
    e3_f6: "Consultoría dedicada",
    e3_f7: "Entrenamiento incluido",
    value_custom: "Precio personalizado según necesidad",
    features_included_title: "Recursos Incluidos en Todos los Planes",
    e_included_1: "Integración Mercado Pago",
    e_included_2: "Panel Administrativo",
    e_included_3: "Carrito Abandonado",
    e_included_4: "Reportes de Ventas",
    e_included_5: "Gestión de Stock",
    e_included_6: "Cupones de Descuento",
    e_included_7: "SEO Optimizado",
    e_included_8: "Soporte Técnico",
    plans_include_title: "Todos los planes incluyen hosting, dominio y mantenimiento básico",
    no_setup_fee: "Sin tarifa de setup",
    cancel_anytime: "Cancela cuando quieras",
    footer_company_title: "Criaclick",
    footer_company_desc: "Somos Criaclick, una agencia digital con más de 5 años de experiencia.",
    footer_links: "Enlaces Institucionales",
    footer_link_company: "La Empresa",
    footer_link_contact: "Contáctanos",
    footer_link_privacy: "Política de Privacidad",
    footer_link_terms: "Términos de Uso",
    footer_contact: "Contacto",
    footer_address_line1: "R. Dep. Raimundo Andrade, 11",
    footer_address_line2: "BR, Codo-MA",
    footer_rights: "© {year} Criaclick. Todos los derechos reservados.",
    footer_built_by: "Desarrollado con",
    footer_team: "por el equipo Criaclick",
  },
};

export function I18nProvider({ children }: { children: React.ReactNode }) {
  const [locale, setLocale] = useState<Locale>("pt");

  useEffect(() => {
    const saved = localStorage.getItem("locale") as Locale | null;
    if (saved && ["pt", "en", "es"].includes(saved)) {
      setLocale(saved);
      return;
    }
    const nav = navigator.language.slice(0, 2) as Locale;
    if (["en", "es"].includes(nav)) {
      setLocale(nav);
      localStorage.setItem("locale", nav);
    }
  }, []);

  const value: I18nContextType = useMemo(
    () => ({
      locale,
      setLocale: (l) => {
        setLocale(l);
        localStorage.setItem("locale", l);
      },
      t: (key) => DICTS[locale][key] ?? key,
    }),
    [locale]
  );

  return <I18nContext.Provider value={value}>{children}</I18nContext.Provider>;
}

export function useI18n() {
  const ctx = useContext(I18nContext);
  if (!ctx) throw new Error("useI18n must be used within I18nProvider");
  return ctx;
}
